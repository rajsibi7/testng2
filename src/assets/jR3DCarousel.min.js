/**
 * Author: Vinayak Rangnathrao Jadhav
 * Project: jR3DCarousel
 * Version: 1.0.0
 **/
(function(g){"function"===typeof define&&define.amd?define(["jquery"],g):"object"===typeof exports?module.exports=g(require("jquery")):g(jQuery)})(function(g){g.fn.jR3DCarousel=function(C){function x(){r=setInterval(A,a.animationInterval+a.animationDuration)}function A(){t=v+1;y.run(a.animation,t);z()}function w(){this.animations={slide:D,slide3D:E,scroll:F,scroll3D:G,fade:H}}function D(a){c.css({perspective:"",overflow:"hidden"});h=e*a;f.css({transform:"translateZ("+-d+"px) rotateY("+-h+"deg)"})}
function E(a){c.css({perspective:k,overflow:"visible"});h=e*a;f.css({transform:"translateZ("+-d+"px) rotateY("+-h+"deg)"})}function F(a){c.css({perspective:"",overflow:"hidden"});h=e*a;f.css({transform:"translateZ("+-d+"px) rotateX("+-h+"deg)"})}function G(a){c.css({perspective:k,overflow:"visible"});h=e*a;f.css({transform:"translateZ("+-d+"px) rotateX("+-h+"deg)"})}function H(c){f.css({transition:"opacity "+a.animationDuration+"ms "+a.animationCurve,opacity:0});h=e*c;f.css({transform:"translateZ("+
-d+"px) rotateY("+-h+"deg)"});f.css({opacity:1})}function z(){c.find(".nav").css({backgroundColor:"rgba(255, 255, 255, 0.77)"}).eq(t%b).css({backgroundColor:"rgba(0, 0, 0, 0.77)"});v=Math.round(h/e);a.onSlideShow.call(this,f.find("."+a.slideClass).eq(v%b))}function B(){c.width("100%");f.hide();l=c.width()<a.width?c.width():a.width;u=l/I;c.css({width:l+"px",height:u+"px"});-1!=a.animation.indexOf("slide")?(d=l/2/Math.tan(Math.PI/b),k=l/2*Math.tan(2*Math.PI/b)+"px"):-1!=a.animation.indexOf("scroll")?
(d=u/2/Math.tan(Math.PI/b),k=u/2*Math.tan(2*Math.PI/b)+"px"):"fade"==a.animation&&(d=l/2/Math.tan(Math.PI/b),k=l/2*Math.tan(2*Math.PI/b)+"px");c.find("."+a.slideClass).each(function(c){var b=g(this);-1!=a.animation.indexOf("slide")?m="rotateY("+e*c+"deg) translateZ("+d+"px)":-1!=a.animation.indexOf("scroll")?m="rotateX("+e*c+"deg) translateZ("+d+"px)":"fade"==a.animation&&(m="rotateY("+e*c+"deg) translateZ("+d+"px)");b.css({transform:m})});k=a.perspective||k;f.css({transform:"translateZ("+-d+"px) rotateY("+
-h+"deg)"});f.show();c.css({perspective:k})}function K(a,c){var b,n,d,f,e,g,k;a.on("touchstart",function(a){a=a.originalEvent.changedTouches[0];b="none";n=a.pageX;d=a.pageY;k=(new Date).getTime()}).on("touchmove",function(a){a.preventDefault()}).on("touchend",function(a){a=a.originalEvent.changedTouches[0];f=a.pageX-n;e=a.pageY-d;g=(new Date).getTime()-k;700>=g&&(20<=Math.abs(f)&&100>=Math.abs(e)?b=0>f?"left":"right":20<=Math.abs(e)&&100>=Math.abs(f)&&(b=0>e?"up":"down"));c(b)})}var a=g.extend(!0,
{},{width:1349,height:668,slides:[],slideLayout:"fill",perspective:0,animation:"slide3D",animationCurve:"ease",animationDuration:700,animationInterval:2E3,autoplay:!0,controls:!0,slideClass:"jR3DCarouselSlide",navigation:"circles",onSlideShow:function(){}},C),c=this,l=a.width,u=a.height,I=a.width/a.height,f=g("<div class='jR3DCarousel' />").css({width:"100%",height:"100%",transition:"transform "+a.animationDuration+"ms "+a.animationCurve,transformStyle:"preserve-3d"}).appendTo(c),v=0,t=1,y=new w,
p,q,r,e,h=0,d,k,m,b=a.slides.length||c.find("."+a.slideClass).length;(function(){function h(){p=g("<div class='previous controls' style='left: 8px; transform: rotate(-45deg);'></div>");q=g("<div class='next controls' style='right: 8px; transform: rotate(135deg);'></div>");p.add(q).appendTo(c).css({position:"absolute",top:"42%",zIndex:1,display:"inline-block",padding:"1.2em",boxShadow:"2px 2px 0 rgba(255,255,255,0.9) inset",cursor:"pointer"}).hide();p.on("click",function(){t=v-1;y.run(a.animation,
t);z()});q.on("click",function(){A()});c.on("mouseenter touchstart",function(){p.add(q).fadeIn()}).on("mouseleave touchcancel",function(){p.add(q).fadeOut()});g(document).on("keydown",function(a){var b=c[0].getBoundingClientRect();(b=0<b.bottom&&0<b.right&&b.left<(innerWidth||document.documentElement.clientWidth)&&b.top<(innerHeight||document.documentElement.clientHeight))&&37==a.which?(clearInterval(r),p.click()):b&&39==a.which&&(clearInterval(r),q.click())});K(c,function(b){clearInterval(r);"left"==
b?q.click():"right"==b?p.click():-1!=a.animation.indexOf("scroll")&&("down"==b?q.click():"up"==b&&p.click())})}function J(){for(var d=g("<div class=navigation />").css({position:"absolute",bottom:0,right:0}),e=0;e<b;e++)d.append("<div class=nav></div>");"circles"==a.navigation&&d.find(".nav").css({borderRadius:"12px"});d.find(".nav").css({display:"inline-block",margin:"5px",cursor:"pointer",backgroundColor:"rgba(255, 255, 255, 0.77)",width:"12px",height:"12px",transition:"all "+a.animationDuration+
"ms ease"}).first().css({backgroundColor:"rgba(0, 0, 0, 1)"});f.after(d);c.on("click",".nav",function(){var c=g(this).index();t=Math.floor(v/b)*b+c;y.run(a.animation,t);z()})}(function(){-1!=a.animation.indexOf("slide")?(d=l/2/Math.tan(Math.PI/b),k=l/2*Math.tan(2*Math.PI/b)+"px"):-1!=a.animation.indexOf("scroll")?(d=u/2/Math.tan(Math.PI/b),k=u/2*Math.tan(2*Math.PI/b)+"px"):"fade"==a.animation&&(d=l/2/Math.tan(Math.PI/b),k=l/2*Math.tan(2*Math.PI/b)+"px");e=360/b;if(a.slides.length)for(var n=0;n<a.slides.length;n++){var h=
g("<div class='jR3DCarouselSlide' data-index="+n+" />").append("<img src='"+a.slides[n].src+"' alt='"+a.slides[n].alt+"' />");-1!=a.animation.indexOf("slide")?m="rotateY("+e*n+"deg) translateZ("+d+"px)":-1!=a.animation.indexOf("scroll")?m="rotateX("+e*n+"deg) translateZ("+d+"px)":"fade"==a.animation&&(m="rotateY("+e*n+"deg) translateZ("+d+"px)");h.css({transform:m});f.append(h)}else c.find("."+a.slideClass).each(function(b){var c=g(this).attr("data-index",b);-1!=a.animation.indexOf("slide")?m="rotateY("+
e*b+"deg) translateZ("+d+"px)":-1!=a.animation.indexOf("scroll")?m="rotateX("+e*b+"deg) translateZ("+d+"px)":"fade"==a.animation&&(m="rotateY("+e*b+"deg) translateZ("+d+"px)");c=c.css({transform:m}).detach();f.append(c)});f.find("."+a.slideClass).css({position:"absolute",left:0,top:0,width:"100%",height:"100%",backfaceVisibility:"hidden"}).find("img").css({width:"100%",height:"100%",objectFit:a.slideLayout});k=a.perspective||k;c.css({perspective:k,width:l+"px",height:u+"px",position:"relative",overflow:"visible"})})();
a.controls&&h();a.navigation&&J();a.autoplay&&(x(),c.hover(function(){clearInterval(r)},function(){x()}));addEventListener("resize",B);B();var w=function(){var a,b,c={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(a in c)if(a in document){b=c[a];break}return function(c){c&&document.addEventListener(b,c);return!document[a]}}();w(function(){w()?x():clearInterval(r)})})();w.prototype.run=function(a,b){this.animations[a](b)};
this.showSlide=function(a){f.find(".nav").eq((a-1)%b).click()};this.getCurrentSlide=function(){return f.find("."+a.slideClass).eq(v%b)};this.getSlideByIndex=function(b){return f.find("."+a.slideClass+"[data-index="+b+"]")};this.showPreviousSlide=function(){p.click()};this.showNextSlide=function(){q.click()};this.playCarousel=function(){x()};this.pauseCarousel=function(){clearInterval(r)};return this}});